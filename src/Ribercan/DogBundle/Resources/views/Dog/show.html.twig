{% extends "base.html.twig" %}

{% set body_class = 'page-dog' %}

{% block body %}
<section class="section--animal" id="dog" style="background: url('/{{ dog.mainImage }}') no-repeat; background-size: contain;">
  <header class="animal-hero"></header>
  <div class="main">
    <div class="animal-adopt">
      <h1 class="name">{{ dog.sex|raw }} {{ dog.name }}</h1>
      <p>
        <a href="#" class="btn btn-primary" role="button">Adóptame</a> <a href="#" class="btn btn-default" role="button">Apadríname</a>
      </p>
    </div><!-- .animal-adopt -->
    <p class="animal-entry">Entrada en la protectora <time>{{ dog.joinDate }}</time></p>
    <ul class="List--metadata">
      <li class="ListItem"><b>Edad:</b> <time>{{ dog.age }}</time></li>
      <li class="ListItem"><b>Tamaño:</b> {{ dog.size }}</li>
      <li class="ListItem"><b>Salud:</b> {{ dog.sterilized }}</li>
      {% if dog.godfather %}
        <li class="ListItem">Apadrinado por {{ dog.godfather }}</li>
      {% endif %}
    </ul>
    <div class="description">
      {{ dog.description | raw }}
    </div>
    {% if dog.video or dog.images is not empty %}
      <ul class="List--thumbs" id="dog-gallery">
        {% if dog.video %}
          <li class="ListItem">
            <img src="{{ dog.videoThumbnail }}" class="videoThumbnail" alt="Ver Vídeo en YouTube">
            <a href="{{ dog.videoUrl }}" class="play" id="show-video" type="text/html" data-youtube="{{ dog.videoId }}" data-gallery></a>
          </li>
        {% endif %}
        {% for image in dog.images %}
          <li class="ListItem">
            <a href="/{{ image.webPath }}">
              <img src="/{{ image.webPath }}">
            </a>
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </div><!-- .main -->
  <div class="urgent">
    <div class="l__wrapper">
      {{ include('RibercanDogBundle:Dog:urgent_adoptions.html.twig', { 'dogs': urgent_adoptions }) }}
    </div>
  </div>
  <!-- .urgent -->
</section>

<!-- The Gallery as lightbox dialog, should be a child element of the document body -->
<div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">
    <div class="slides"></div>
    <h3 class="title"></h3>
    <a class="prev">‹</a>
    <a class="next">›</a>
    <a class="close">×</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>
</div>
{% endblock %}

{% block header_javascripts %}
  <script src="/assets/vendor/Gallery/js/blueimp-gallery.min.js"></script>
{% endblock %}

{% block stylesheets %}
  <link rel="stylesheet" type="text/css" href="/assets/vendor/Gallery/css/blueimp-gallery.min.css">
{% endblock %}

{% block javascripts %}
<script>
  document.getElementById('dog-gallery').onclick = function (event) {
      event = event || window.event;
      var target = event.target || event.srcElement,
          link = target.src ? target.parentNode : target,
          options = { index: link, event: event }
          links = this.getElementsByTagName('a');
      blueimp.Gallery(links, options);
  };
</script>
{% endblock %}
